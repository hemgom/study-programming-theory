# 스트림(stream)?
이전에는 배열이나 컬렉션에 저장된 데이터를 활용하기 위해 `for문`과 `Iterator(1)`를 이용했다  
하지만 코드가 너무 길어지고 복잡해져 알아보기가 어려워졌고, 유지보수에 용이하지 않았다  
이러한 문제점들 때문에 등장한 것이 `스트림(stream)`이다

스트림(stream)은 데이터를 추상화하고 데이터를 다루는데 자주 사용되는 메서드들을 정의해 놓았다  
`추상화`했다는 것은 데이터 소스(컬렉션 or 배열)가 무엇이던 간 동일한 방식으로 다룰 수 있다는 것이다  
덕분에 스트림은 자연스럽게 유지보수성이 높아졌다
<br><br>
## 사용 목적
- 다양한 데이터 소스를 표준화된 방법으로 다루기 위해
<br><br>
## 스트림 작업 과정
```
ㅤ데이터소스 ㅤ>>>> ㅤstream ㅤ >>>> ㅤ중간연산 ㅤ>>>> ㅤ최종연산 ㅤ>>>> ㅤ결과
(컬레션, 배열)ㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤㅤ(n번)ㅤㅤㅤㅤㅤㅤ (1번)
============================= ㅤㅤㅤㅤ=======ㅤㅤㅤㅤ ㅤ====================
        1. 스트림 생성            2. 중간연산 지정    ㅤㅤㅤ 3. 결과 도출 
```
- 중간연산 - 연산결과가 스트림인 연산, 반복적 사용 가능
- 최종연산 - 연산결과가 스트림이 아닌 연산, 단 한 번 사용가능(스트림의 요소를 소모하기 때문에)
<br><br>
## 스트림의 특징
1. `데이터 소스(원본)를 변경하지 않음 - (read only)`
   - 데이터 소스로 부터 데이터를 읽어와 요소로 사용할 뿐, 데이터 소스를 변경하지 않음
2. `일회용`
   - 한번 사용하면 다시 사용할 수 없다, 필요하다면 스트림을 재생성해야 한다
3. `작업을 내부 반복으로 처리`
   - 내부 반복이란 반복문을 메서드의 내부에 숨겼다는 것
   - 스트림의 작업이 간결할 수 있는 비결
4. `지연 연산(Lazy Evaluation)(2)`
   - 최종 연산 전까지 중간연산이 수행되지 않는다
   - `중간연산 호출의 의미`는 연산수행이 아니라 `수행될 연산지정`을 뜻한다
   - 최종연산이 수행되어야 중간 연산을 거쳐 결과를 도출한다 
5. `병렬 스트림`
   - 모든 스트림은 기본적으로 병렬 스트림이 아니다
   - 다만 스트림에 `parallel()`메서드를 호출하면 병렬로 연산을 수행한다
   - 병렬 연산을 취소하려면 `sequential()`메서드를 호출하면 된다
<br><br>
## 스트림 만들기 (데이터 소스별)
### 1. 컬렉션
```
// 컬렉션 변수(데이터소스)가 존재

Stream<타입> 스트림명 = 컬렉션변수명.stream();
```
- Collection 인터페이스에 정의되어있는 `stream()`메서드를 사용한다
- 해당 메서드는 컬렉션을 소스(source)로 하는 스트림을 반환한다
### 2. 배열
```
1) Stream<타입> 스트림명 = Stream.of(배열);

2.1) Stream<타입> 스트림명 = Arrays.stream(배열);
2.2) Stream<타입> 스트림명 = Arrays.stream(배열, int startInclusive, int endExclusive);
```
- 기본형(int, double, long 등)의 경우 `Stream`대신 `IntStream`, `DoubleStream`, `...`을 사용한다
- 2.2) 의 경우 배열의 일부를 스트림으로 반환한다, 범위는 (startInclusive <= index < endExclusive)
### 3. 난수
```
IntStream ints(long streamSize)
LongStream longs(long streamSize)
DoubleStream doubles(long streamSize)
```
- Random 클래스의 멤버 메서드들, 해당 타입의 난수들로 이루어진 스트림을 반환한다
- 매개변수 값이 없다면 무한 스트림을 반환하기에 `limit()`를 사용해 스트림의 크기를 제한해야 한다
```
IntStream intStream = new Random().ints(); // 정수형 난수를 스트림으로 반환
intStream.limit(5).forEach(System.out::println); // 5개의 요소만 출력
```
- 매개변수가 없는 `ints()`를 사용해 스트림의 크기를 제한해줬다
- 만약 `int()`에 매개변수가 있다면 크기를 제한해 줄 필요가 없다, `limit()`가 불필요
<br><br>
## 중간연산 메서드
- `skip(long n)` - `n`번째 스트림 요소까지 잘라낸다 
- `limit(long maxSize)` - `maxSize`개 만큼 스트림 요소의 개수를 제한한다
- `filter(Predicater<? super T> predicate)`
   - 조건을 만족하는 요소만을 걸러낸다
   - 매개변수로 `Predicator`말고 `연산결과가 boolean인 람다식`을 사용할 수 있다
- `distinct()` - 스트림에서 중복된 요소를 제거한다
<br><br>
## 최종연산 메서드
- `forEach()` - 스트림의 모든 요소에 지정된 작업을 수행, 병렬스트림인 경우 순서보장 x
   - `forEachOrdered()` - 병렬스트림인 경우 순서보장 o
<br><br>
## 용어 정리
1. `Iterator` : 컬렉션에 저장된 요소를 접근하는데 사용되는 인터페이스
2. `지연 연산(Lazy Evaluation)` : 불필요한 연산을 피하기 위해 연산을 지연시키는 기법
<br><br>
## ※ 업데이트
- written first - 23.06.05 
